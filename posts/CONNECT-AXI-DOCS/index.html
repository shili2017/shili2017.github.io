<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="CONNECT AXI Wrapper Documentation (Draft)" /><meta property="og:locale" content="en" /><meta name="description" content="Introduction" /><meta property="og:description" content="Introduction" /><link rel="canonical" href="https://shili2017.github.io/posts/CONNECT-AXI-DOCS/" /><meta property="og:url" content="https://shili2017.github.io/posts/CONNECT-AXI-DOCS/" /><meta property="og:site_name" content="Li Shi" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-06-16T22:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="CONNECT AXI Wrapper Documentation (Draft)" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-06-16T22:00:00+00:00","datePublished":"2022-06-16T22:00:00+00:00","description":"Introduction","headline":"CONNECT AXI Wrapper Documentation (Draft)","mainEntityOfPage":{"@type":"WebPage","@id":"https://shili2017.github.io/posts/CONNECT-AXI-DOCS/"},"url":"https://shili2017.github.io/posts/CONNECT-AXI-DOCS/"}</script><title>CONNECT AXI Wrapper Documentation (Draft) | Li Shi</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Li Shi"><meta name="application-name" content="Li Shi"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/avatar/avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Li Shi</a></div><div class="site-subtitle font-italic">Sleep every day</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/shili2017" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="https://www.linkedin.com/in/lishi2022" aria-label="linkedin" target="_blank" rel="noopener noreferrer"> <i class="fab fa-linkedin"></i> </a> <a href="javascript:location.href = 'mailto:' + ['shili2048','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>CONNECT AXI Wrapper Documentation (Draft)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>CONNECT AXI Wrapper Documentation (Draft)</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1655416800" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 16, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/shili2017">Li Shi</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1817 words"> <em>10 min</em> read</span></div></div></div><div class="post-content"><h1 id="introduction">Introduction</h1><p>The AXI4[-Stream] wrapper is built over the <a href="https://research.ece.cmu.edu/calcm/new_connect/connect/">CONNECT</a> NoC, which is a network generator targeting FPGA.</p><h1 id="getting-started">Getting Started</h1><p>First, clone the CONNECT repository and build a sample network.</p><blockquote><p>TODO: Replace the git repository address in the future.</p></blockquote><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nv">$ </span>git clone https://github.com/shili2017/connect.git
<span class="nv">$ </span><span class="nb">cd </span>connect
<span class="nv">$ </span>python gen_network.py <span class="nt">-t</span> double_ring <span class="nt">-w</span> 38 <span class="nt">-n</span> 4 <span class="nt">-v</span> 2 <span class="nt">-d</span> 4 <span class="nt">--gen_rtl</span> <span class="nt">--gen_graph</span>
</pre></table></code></div></div><p>The network will be generated and put in the <code class="language-plaintext highlighter-rouge">build</code> directory. Then we can run the sample test bench.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nv">$ </span><span class="nb">cp </span>Prims/run_modelsim.sh build/
<span class="nv">$ </span><span class="nb">cd </span>build
<span class="nv">$ </span>./run_modelsim.sh
</pre></table></code></div></div><p>The default sample test bench is for AXI4-Stream protocol. To test on AXI4 standard protocol, in <code class="language-plaintext highlighter-rouge">run_modelsim.sh</code>, replace <code class="language-plaintext highlighter-rouge">CONNECT_testbench_sample_axi4stream</code> by <code class="language-plaintext highlighter-rouge">CONNECT_testbench_sample_axi4</code>.</p><p>To change (a) flit width or (b) number of virtual channels or (c) flit buffer depth, first re-generate the network.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>python gen_network.py <span class="nt">-t</span> double_ring <span class="nt">-w</span> &lt;flit_width&gt; <span class="nt">-n</span> 4 <span class="nt">-v</span> &lt;num_vcs&gt; <span class="nt">-d</span> &lt;flit_buffer_depth&gt; <span class="nt">--gen_rtl</span> <span class="nt">--gen_graph</span>
</pre></table></code></div></div><p>Then change the parameters in <code class="language-plaintext highlighter-rouge">connect_parameters.v</code>.</p><div class="language-verilog highlighter-rouge"><div class="code-header"> <span data-label-text="Verilog"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="cp">`define</span> <span class="n">NUM_VCS</span> <span class="o">&lt;</span><span class="n">num_vcs</span><span class="o">&gt;</span>
<span class="cp">`define</span> FLIT_DATA_WIDTH <span class="err">&lt;</span>flit_depth<span class="err">&gt;</span><span class="cp">
`define</span> FLIT_BUFFER_DEPTH <span class="err">&lt;</span>flit_buffer_depth<span class="err">&gt;</span><span class="cp">
</span></pre></table></code></div></div><blockquote><p>Do not change number of send or receive ports for now. So far the wrapper is still written manually, and only supports 4 terminals in the network.</p><p>TODO: Consider generating the network wrapper automatically with scripts.</p></blockquote><blockquote><p>To prevent potential deadlocks, AXI4 standard protocol requires at least 2 virtual channels, one for requests and the other for responses, and responses have higher priority. Meanwhile, AXI4-Stream only needs 1 virtual channel.</p></blockquote><h1 id="overall-design">Overall Design</h1><p>The overall design is shown in the following blocks.</p><p>AXI4:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>                                        CLK_FPGA                                     |                      CLK_NOC
---------------------------------------------------------------------------------------------------------------------

+--------+            +------------+             +--------------+             +-------------+             +---------+
| Device | &lt;--AXI4--&gt; | AXI4Bridge | ---flits--&gt; |  Serializer  | ---flits--&gt; | InPortFIFO  | ---flits--&gt; |         |
+--------+            +------------+   97 bits   +--------------+    n bits   +-------------+    n bits   |         |
                            ^                                                                             | Network |
                            |                    +--------------+             +-------------+             |         |
                            +-----------flits--- | Deserializer | &lt;--flits--- | OutPortFIFO | &lt;--flits--- |         |
                                       97 bits   +--------------+    n bits   +-------------+    n bits   +---------+
</pre></table></code></div></div><p>AXI4-Stream:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>                                                     CLK_FPGA                                      |                      CLK_NOC
-----------------------------------------------------------------------------------------------------------------------------------

+---------------+                   +------------+             +--------------+             +-------------+             +---------+
| Master Device | ---AXI4-Stream--&gt; | AXI4Bridge | ---flits--&gt; |  Serializer  | ---flits--&gt; | InPortFIFO  | ---flits--&gt; |         |
+---------------+                   +------------+   106 bits  +--------------+    n bits   +-------------+    n bits   |         |
                                                                                                                        | Network |
+---------------+                   +------------+             +--------------+             +-------------+             |         |
| Slave  Device | &lt;--AXI4-Stream--- | AXI4Bridge | &lt;--flits--- | Deserializer | &lt;--flits--- | OutPortFIFO | &lt;--flits--- |         |
+---------------+                   +------------+   106 bits  +--------------+    n bits   +-------------+    n bits   +---------+
</pre></table></code></div></div><h2 id="related-source-files"><span class="mr-2">Related Source Files</span><a href="#related-source-files" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><p><code class="language-plaintext highlighter-rouge">NetworkAXI4Wrapper.sv</code></p><li><p><code class="language-plaintext highlighter-rouge">NetworkAXI4StreamWrapper.sv</code></p></ul><h1 id="axi4-stream-bridge-design">AXI4[-Stream] Bridge Design</h1><p>An AXI4 bridge is used to convert a pair of send &amp; recv port to a standard AXI4 protocol interface, either as a master device or a slave device. For example, for a network with 4 endpoints, we can have 2 AXI4 master devices and 2 AXI4 slave devices.</p><p>An AXI4-Stream bridge is used to convert a send or recv port to a AXI4-Stream protocol master or slave interface. For example, for a network with 4 endpoints, we can have 4 AXI4-Stream master devices and 4 AXI4-Stream slave devices.</p><h2 id="related-parameters"><span class="mr-2">Related Parameters</span><a href="#related-parameters" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Parameters are defined in <code class="language-plaintext highlighter-rouge">AXI4Package.sv</code>.</p><div class="language-verilog highlighter-rouge"><div class="code-header"> <span data-label-text="Verilog"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">parameter</span> <span class="n">ADDR_WIDTH</span>   <span class="o">=</span> <span class="mi">32</span><span class="p">;</span>
<span class="k">parameter</span> <span class="n">DATA_WIDTH</span>   <span class="o">=</span> <span class="mi">64</span><span class="p">;</span>
<span class="k">parameter</span> <span class="n">STRB_WIDTH</span>   <span class="o">=</span> <span class="n">DATA_WIDTH</span> <span class="o">/</span> <span class="mi">8</span><span class="p">;</span>
<span class="k">parameter</span> <span class="n">ID_WIDTH</span>     <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>
<span class="k">parameter</span> <span class="n">USER_WIDTH</span>   <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>
<span class="k">parameter</span> <span class="n">KEEP_WIDTH</span>   <span class="o">=</span> <span class="n">DATA_WIDTH</span> <span class="o">/</span> <span class="mi">8</span><span class="p">;</span>
<span class="k">parameter</span> <span class="n">DEST_WIDTH</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
</pre></table></code></div></div><p>Users also need to calculate the standard AXI4[-Stream] flit data width by themselves. For example, with the default parameters, we have</p><div class="language-verilog highlighter-rouge"><div class="code-header"> <span data-label-text="Verilog"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">parameter</span> <span class="n">AXI4_FLIT_DATA_WIDTH</span>  <span class="o">=</span> <span class="mi">76</span><span class="p">;</span>
<span class="k">parameter</span> <span class="n">AXI4S_FLIT_DATA_WIDTH</span> <span class="o">=</span> <span class="mi">93</span><span class="p">;</span>
</pre></table></code></div></div><h2 id="axi4"><span class="mr-2">AXI4</span><a href="#axi4" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>AXI4 requests and responses are encoded in a single AXI4 flit. A standard AXI4 request or response with the aforementioned parameters is encoded into a 92-bit flit. The 3 most significant bits represent for the channel flag for the 5 AXI4 channels.</p><blockquote><p>User devices are required to mark the source ID in AXI4 ID field, and AXI4 ID field is put in the LSB part in the flit to be identified by the serializer &amp; deserializer.</p></blockquote><p>AXI4 requests are sent in virtual channel 1, and AXI4 responses are sent in virtual channel 0, which has a higher priority to prevent potential deadlocks.</p><h3 id="awar-channel"><span class="mr-2">AW/AR Channel</span><a href="#awar-channel" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre>AXI_x     - [75     ]
axid      - [74 : 67]
------ padding ------
axregion  - [60 : 57]
axqos     - [56 : 53]
axprot    - [52 : 50]
axcache   - [49 : 46]
axlock    - [45     ]
axburst   - [44 : 43]
axsize    - [42 : 40]
axlen     - [39 : 32]
axaddr    - [31 :  0]
</pre></table></code></div></div><h3 id="w-channel"><span class="mr-2">W Channel</span><a href="#w-channel" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>AXI_W     - [75     ]
------ padding ------
wlast     - [72     ]
wstrb     - [71 : 64]
wdata     - [63 :  0]
</pre></table></code></div></div><h3 id="b-channel"><span class="mr-2">B Channel</span><a href="#b-channel" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>AXI_W     - [75     ]
bid       - [74 : 67]
------ padding ------
bresp     - [65 : 64]
------ padding ------
</pre></table></code></div></div><h3 id="r-channel"><span class="mr-2">R Channel</span><a href="#r-channel" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>AXI_R     - [75     ]
rid       - [74 : 67]
rlast     - [66     ]
rresp     - [65 : 64]
rdata     - [63 :  0]
</pre></table></code></div></div><h2 id="axi4-stream"><span class="mr-2">AXI4-Stream</span><a href="#axi4-stream" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>AXI4-Stream requests are encoded in a single AXI4-Stream flit. A AXI4-Stream request with the aforementioned parameters is encoded into a 101-bit flit.</p><blockquote><p>User devices are required to mark the source ID in AXI4-Stream ID field, and AXI4-Stream ID field is put in the LSB part in the flit to be identified by the serializer &amp; deserializer.</p></blockquote><h3 id="t-channel"><span class="mr-2">T Channel</span><a href="#t-channel" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>tdest - [92 : 89]
tid   - [88 : 81]
tlast - [80     ]
tkeep - [79 : 72]
tstrb - [71 : 64]
tdata - [63 :  0]
</pre></table></code></div></div><h2 id="related-source-files-1"><span class="mr-2">Related Source Files</span><a href="#related-source-files-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><p><code class="language-plaintext highlighter-rouge">AXI4Bridge.sv</code></p><li><p><code class="language-plaintext highlighter-rouge">AXI4StreamBridge.sv</code></p><li><p><code class="language-plaintext highlighter-rouge">AXI4Interface.sv</code></p><li><p><code class="language-plaintext highlighter-rouge">AXI4Package.sv</code></p></ul><h1 id="serializer--deserializer-design">Serializer &amp; Deserializer Design</h1><p>To handle mismatched sizes of AXI4[-Stream] protocol flits and actual flits to be sent, a serializer &amp; deserializer for each master &amp; slave device is needed. For example, for a AXI4-Stream request flit of 101+5 bits (5 is metadata, including valid bit, tail bit, etc.) and actual flit width of 38+5 bits, a single request needs to be split into 3 small flits by the serializer on the sender side and then small flits can be reassembled to a complete AXI request on the receiver side.</p><p>What makes things more complicated is that in the case that two master devices send data to a single slave device, flits may interleave (when virtual link is not enabled in CONNECT, or in general NoCs). Thus we need to encode source ID into the small flit such that the deserializer can distinguish interleaving flits. Fortunately, both AXI4 and AXI4-Stream supports interleaving requests and responses on the protocol level, so we don’t need to store the whole packet, whose size is unknown at the beginnning. Namely, for every single transfer in AXI4[-Stream], we set the tail bit to 1.</p><p>For the serializer, the number of flits is <code class="language-plaintext highlighter-rouge">ceil(IN_FLIT_DATA_WIDTH / OUT_FLIT_EFF_DATA_WIDTH)</code>, where <code class="language-plaintext highlighter-rouge">OUT_FLIT_EFF_DATA_WIDTH = OUT_FLIT_DATA_WIDTH - SRC_BITS</code>. Similarly, for the deserializer, the number of flits is <code class="language-plaintext highlighter-rouge">ceil(OUT_FLIT_DATA_WIDTH / IN_FLIT_EFF_DATA_WIDTH)</code>, where <code class="language-plaintext highlighter-rouge">IN_FLIT_EFF_DATA_WIDTH = IN_FLIT_DATA_WIDTH - SRC_BITS</code>. The structure of small flit is shown as follows,</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre> -----------------------------------------------------------------------------------
 | &lt;valid bit&gt; | &lt;is_tail&gt; | &lt;destination&gt; | &lt;virtual channel&gt; | &lt;source&gt; | &lt;data&gt; |
 -----------------------------------------------------------------------------------
        1            1        `DEST_BITS         `VC_BITS       `SRC_BITS  OUT_FLIT_EFF_DATA_WIDTH
</pre></table></code></div></div><p>To handle interleaving flits, currently we adopt only a simple solution, as we know that flits are in-order and we know the number of senders. We make a table with one row per source ID and just fill in the table with successive flits until the tail flit arrives. At that moment the flits can be reassembled into a AXI4 flit and be processed by a later stage. We also implement a priority encoder as an arbiter to handle multiple valid reassembled flits in a single cycle. See the code below.</p><div class="language-verilog highlighter-rouge"><div class="code-header"> <span data-label-text="Verilog"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="c1">// Use a priority encoder to decide which flit to send</span>
<span class="kt">logic</span> <span class="p">[</span><span class="cp">`SRC_BITS</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">]</span> <span class="n">out_idx</span><span class="p">;</span>
<span class="k">always_comb</span> <span class="k">begin</span>
  <span class="n">out_idx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="cp">`NUM_USER_SEND_PORTS</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span> <span class="k">begin</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">out_valid</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
      <span class="n">out_idx</span> <span class="o">=</span> <span class="n">i</span><span class="p">;</span>
  <span class="k">end</span>
<span class="k">end</span>
<span class="k">always_comb</span> <span class="k">begin</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="cp">`NUM_USER_SEND_PORTS</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="k">begin</span>
    <span class="n">out_ready</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">out_flit</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">end</span>
  <span class="n">out_ready</span><span class="p">[</span><span class="n">out_idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">out_flit_ready</span><span class="p">;</span>
  <span class="n">out_flit</span> <span class="o">=</span> <span class="o">{</span><span class="n">flit_meta_reg</span><span class="p">[</span><span class="n">out_idx</span><span class="p">],</span> <span class="n">flit_data_reg</span><span class="p">[</span><span class="n">out_idx</span><span class="p">][</span><span class="n">OUT_FLIT_DATA_WIDTH</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">]</span><span class="o">}</span><span class="p">;</span>
<span class="k">end</span>
</pre></table></code></div></div><h2 id="related-source-files-2"><span class="mr-2">Related Source Files</span><a href="#related-source-files-2" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><code class="language-plaintext highlighter-rouge">FlitSerializer.sv</code></ul><h1 id="flow-control-layer-design">Flow Control Layer Design</h1><p>Credit-based flow control is supported in CONNECT and the wrapper. To support flow control, a synchronous FIFO, i.e., <code class="language-plaintext highlighter-rouge">SCFIFO</code>, is implemented as a buffer between the user devices (or more accurately, the serailizer or deserializer) and the network. On the sender side, we need to maintain a credit counter. Each time we send a flit, we need to decrement the counter, and each time we receive a credit from the network, we increment the counter. On the receiver side, each time we dequeue a flit from the FIFO to the user device, we send a credit to the network.</p><p>The network itself can run at a higher clock frequency as ASIC, and the remaining FPGA logic may run at a lower clock frequency. Thus a FIFO with different read and write clock, i.e., <code class="language-plaintext highlighter-rouge">DCFIFO</code>, is also needed. The block diagram of a FIFO is shown below.</p><p><code class="language-plaintext highlighter-rouge">InPortFIFO</code>:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>            (WR) CLK_FPGA   CLK_NOC (RD)             CLK_NOC
                        |   |                        |
                        v   v                        v                             +---------------+
                     +--------+                    +--------+                      |               | ---send_ports_putFlit_flit_in--&gt;
---put_flit--------&gt; |        | ---sc_enq_data---&gt; |        | ---deq_flit_data---&gt; | Combinational | ---EN_send_ports_putFlit-------&gt;
---put_flit_valid--&gt; | DCFIFO | ---sc_enq_valid--&gt; | SCFIFO | ---deq_flit_valid--&gt; | Logic         | &lt;--send_ports_getCredits--------
&lt;--put_flit_ready--- |        | &lt;--sc_enq_ready--- |        | &lt;--deq_flit_ready--- |               | ---EN_send_ports_getCredits----&gt;
                     +--------+                    +--------+                      +---------------+
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">OutPortFIFO</code>:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>            (RD) CLK_FPGA   CLK_NOC (WR)             CLK_NOC
                        |   |                        |
                        v   v                        v                             +---------------+
                     +--------+                    +--------+                      |               | &lt;--recv_ports_getFlit------------
&lt;--get_flit--------- |        | &lt;--sc_deq_data---- |        | &lt;--enq_flit_data---- | Combinational | ---EN_recv_ports_getFlit--------&gt;
&lt;--get_flit_valid--- | DCFIFO | &lt;--sc_deq_valid--- | SCFIFO | &lt;--enq_flit_valid--- | Logic         | ---recv_ports_putCredits_cr_in--&gt;
---get_flit_ready--&gt; |        | ---sc_deq_ready--&gt; |        | ---enq_flit_ready--&gt; |               | ---EN_recv_ports_putCredits-----&gt;
                     +--------+                    +--------+                      +---------------+
</pre></table></code></div></div><blockquote><p>TODO: 1) Call AXI4 flit a packet. 2) One FIFO for each VC. 3) Add one more VC for W channel. 4) Do read and write in the same cycle? 5) #rows in deserializer should be #src * #vc. 6) One DCFIFO, handle credits approximately. 7) Serializer &amp; deserializer should be close to NoC.</p></blockquote><h2 id="related-parameters-1"><span class="mr-2">Related Parameters</span><a href="#related-parameters-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Parameters of both <code class="language-plaintext highlighter-rouge">DCFIFO</code> and <code class="language-plaintext highlighter-rouge">SCFIFO</code> can be modified by users.</p><p><code class="language-plaintext highlighter-rouge">SCFIFO</code>:</p><div class="language-verilog highlighter-rouge"><div class="code-header"> <span data-label-text="Verilog"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">parameter</span> <span class="n">DEPTH</span>               <span class="o">=</span> <span class="cp">`FLIT_BUFFER_DEPTH</span><span class="p">;</span>
<span class="k">parameter</span> <span class="n">DATA_WIDTH</span>          <span class="o">=</span> <span class="cp">`FLIT_WIDTH</span><span class="p">;</span>
<span class="k">parameter</span> <span class="n">ALMOST_FULL_VALUE</span>   <span class="o">=</span> <span class="cp">`FLIT_BUFFER_DEPTH</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">parameter</span> <span class="n">ALMOST_EMPTY_VALUE</span>  <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">DCFIFO</code>:</p><div class="language-verilog highlighter-rouge"><div class="code-header"> <span data-label-text="Verilog"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">parameter</span> <span class="n">DEPTH</span>               <span class="o">=</span> <span class="cp">`FLIT_BUFFER_DEPTH</span><span class="p">;</span>
<span class="k">parameter</span> <span class="n">DATA_WIDTH</span>          <span class="o">=</span> <span class="cp">`FLIT_WIDTH</span><span class="p">;</span>
</pre></table></code></div></div><h2 id="related-source-files-3"><span class="mr-2">Related Source Files</span><a href="#related-source-files-3" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><code class="language-plaintext highlighter-rouge">FlitFIFO.sv</code></ul><h1 id="testbench">Testbench</h1><p>To test the AXI4[-Stream] wrapper, we also need AXI4[-Stream] devices to send requests or receive responses. We also include testbenches to verify the correctness of AXI4[-Stream] wrapper design. See related source files.</p><h2 id="related-source-files-4"><span class="mr-2">Related Source Files</span><a href="#related-source-files-4" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><p><code class="language-plaintext highlighter-rouge">AXI4Device.sv</code></p><li><p><code class="language-plaintext highlighter-rouge">AXI4StreamDevice.sv</code></p><li><p><code class="language-plaintext highlighter-rouge">testbench_sample_axi4.sv</code></p><li><p><code class="language-plaintext highlighter-rouge">testbench_sample_axi4stream.sv</code></p></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/calcm/'>CALCM</a>, <a href='/categories/connect/'>CONNECT</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=CONNECT%20AXI%20Wrapper%20Documentation%20(Draft)%20-%20Li%20Shi&url=https%3A%2F%2Fshili2017.github.io%2Fposts%2FCONNECT-AXI-DOCS%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=CONNECT%20AXI%20Wrapper%20Documentation%20(Draft)%20-%20Li%20Shi&u=https%3A%2F%2Fshili2017.github.io%2Fposts%2FCONNECT-AXI-DOCS%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fshili2017.github.io%2Fposts%2FCONNECT-AXI-DOCS%2F&text=CONNECT%20AXI%20Wrapper%20Documentation%20(Draft)%20-%20Li%20Shi" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fshili2017.github.io%2Fposts%2FCONNECT-AXI-DOCS%2F" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <a href="http://service.weibo.com/share/share.php?title=CONNECT%20AXI%20Wrapper%20Documentation%20(Draft)%20-%20Li%20Shi&url=https%3A%2F%2Fshili2017.github.io%2Fposts%2FCONNECT-AXI-DOCS%2F" data-toggle="tooltip" data-placement="top" title="Weibo" target="_blank" rel="noopener" aria-label="Weibo"> <i class="fa-fw fab fa-weibo"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/BOOKS/">2023年读书记录</a><li><a href="/posts/NOC5/">《片上网络》笔记（五）：流量控制</a><li><a href="/posts/MCCC9/">《内存一致性与缓存一致性》笔记（九）：异构系统的内存一致性与缓存一致性</a><li><a href="/posts/RL4/">CMU 18-643可重构计算笔记-4：类C语言硬件综合的挑战</a><li><a href="/posts/RL1/">CMU 18-643可重构计算笔记-1：FPGA的三个时代</a></ul></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/CONNECT1/"><div class="card-body"> <em class="small" data-ts="1653579120" data-df="ll" > May 26, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>CONNECT Note (1) - Paper</h3><div class="text-muted small"><p> 原文：CONNECT: Re-Examining Conventional Wisdom for Designing NoCs in the Context of FPGAs. CONNECT是一个NoC生成器，面向FPGA生成任意多节点拓扑结构的可综合RTL设计，这里有一个online demo。CONNECT的意义在于，传统的NoC设计都为ASIC优化，但是面向FPGA的NoC设计需要...</p></div></div></a></div><div class="card"> <a href="/posts/CONNECT2/"><div class="card-body"> <em class="small" data-ts="1654046820" data-df="ll" > Jun 1, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>CONNECT Note (2) - Setup</h3><div class="text-muted small"><p> Run CONNECT testbench Thank Siddharth for providing the notes! Clone the repository from Crossroads GitHub To build a basic double ring network with 4 ports, 256 bit flits, 2 vi...</p></div></div></a></div><div class="card"> <a href="/posts/CONNECT3/"><div class="card-body"> <em class="small" data-ts="1654139220" data-df="ll" > Jun 2, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>CONNECT Note (3) - AXI4 Interface</h3><div class="text-muted small"><p> Source code: link. AXI Requests &amp;amp; Responses In Flits Signals in 5 channels are encapsulated in flit data, with following parameters. parameter ADDR_WIDTH = 32; parameter DATA_WIDTH = 64;...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/MCCC5/" class="btn btn-outline-primary" prompt="Older"><p>《内存一致性与缓存一致性》笔记（五）：宽松内存一致性模型（下）</p></a> <a href="/posts/DPCPP1/" class="btn btn-outline-primary" prompt="Newer"><p>《数据并行C++》笔记（一）：基础</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/shili2017">Li Shi</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
